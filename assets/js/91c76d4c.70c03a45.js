"use strict";(self.webpackChunkguardian=self.webpackChunkguardian||[]).push([[960],{3905:function(e,a,t){t.d(a,{Zo:function(){return u},kt:function(){return m}});var n=t(7294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function p(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var o=n.createContext({}),s=function(e){var a=n.useContext(o),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},u=function(e){var a=s(e.components);return n.createElement(o.Provider,{value:a},e.children)},d={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},c=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(t),m=l,g=c["".concat(o,".").concat(m)]||c[m]||d[m]||r;return t?n.createElement(g,i(i({ref:a},u),{},{components:t})):n.createElement(g,i({ref:a},u))}));function m(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var r=t.length,i=new Array(r);i[0]=c;var p={};for(var o in a)hasOwnProperty.call(a,o)&&(p[o]=a[o]);p.originalType=e,p.mdxType="string"==typeof e?e:l,i[1]=p;for(var s=2;s<r;s++)i[s]=t[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}c.displayName="MDXCreateElement"},2045:function(e,a,t){t.r(a),t.d(a,{assets:function(){return o},contentTitle:function(){return i},default:function(){return d},frontMatter:function(){return r},metadata:function(){return p},toc:function(){return s}});var n=t(3117),l=(t(7294),t(3905));const r={},i="CLI",p={unversionedId:"reference/cli",id:"reference/cli",title:"CLI",description:"Guardian is a command line tool used to interact with the main guardian service. Follow the installation and configuration guides to set up the CLI tool for Guardian.",source:"@site/docs/reference/cli.md",sourceDirName:"reference",slug:"/reference/cli",permalink:"/guardian/docs/reference/cli",draft:!1,editUrl:"https://github.com/goto/guardian/edit/master/docs/docs/reference/cli.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"API",permalink:"/guardian/docs/reference/api"},next:{title:"Appeal",permalink:"/guardian/docs/reference/appeal"}},o={},s=[{value:"List of Commands",id:"list-of-commands",level:2},{value:"Managing Policies",id:"managing-policies",level:2},{value:"Policy Init",id:"policy-init",level:3},{value:"Example Configurations",id:"example-configurations",level:4},{value:"Create Policy",id:"create-policy",level:3},{value:"List Policies",id:"list-policies",level:3},{value:"Edit Policy",id:"edit-policy",level:3},{value:"View Policy",id:"view-policy",level:3},{value:"Apply Policy",id:"apply-policy",level:3},{value:"Plan Policy",id:"plan-policy",level:3},{value:"Managing Providers",id:"managing-providers",level:2},{value:"Provider Init",id:"provider-init",level:3},{value:"Example Configurations",id:"example-configurations-1",level:4},{value:"Create Provider",id:"create-provider",level:3},{value:"List Providers",id:"list-providers",level:3},{value:"Edit Provider",id:"edit-provider",level:3},{value:"Plan Provider",id:"plan-provider",level:3},{value:"View Provider",id:"view-provider",level:3},{value:"Apply Provider",id:"apply-provider",level:3},{value:"Managing Resources",id:"managing-resources",level:2},{value:"List Resources",id:"list-resources",level:3},{value:"Set Resource",id:"set-resource",level:3},{value:"View Resource",id:"view-resource",level:3},{value:"Managing Appeals",id:"managing-appeals",level:2},{value:"Create Appeal",id:"create-appeal",level:3},{value:"List Appeals",id:"list-appeals",level:3},{value:"Approve Appeals",id:"approve-appeals",level:3},{value:"Reject Appeals",id:"reject-appeals",level:3},{value:"Revoke Appeal",id:"revoke-appeal",level:3},{value:"Check Appeal Status",id:"check-appeal-status",level:3},{value:"Cancel Appeal",id:"cancel-appeal",level:3},{value:"Add Approver",id:"add-approver",level:3},{value:"Delete Approver",id:"delete-approver",level:3}],u={toc:s};function d(e){let{components:a,...t}=e;return(0,l.kt)("wrapper",(0,n.Z)({},u,t,{components:a,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"cli"},"CLI"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"Guardian")," is a command line tool used to interact with the main guardian service. Follow the ",(0,l.kt)("a",{parentName:"p",href:"../installation"},"installation")," and ",(0,l.kt)("a",{parentName:"p",href:"../tour/configuration"},"configuration")," guides to set up the CLI tool for Guardian."),(0,l.kt)("h2",{id:"list-of-commands"},"List of Commands"),(0,l.kt)("p",null,"Guardian CLI supports many commands. To get a list of all the commands, follow these steps.\nEnter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian\n\n# or\n\n$ guardian --help\n")),(0,l.kt)("p",null,"List of all availiable commands are as follows:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"CORE COMMANDS\n  appeal      Manage appeals\n  policy      Manage policies\n  provider    Manage providers\n  resource    Manage resources\n\nADDITIONAL COMMANDS\n  completion  Generate shell completion scripts\n  config      Manage client configurations\n  help        Help about any command\n  job         Manage jobs\n  reference   Show command reference\n  server      Server management\n  version     Print version information\n")),(0,l.kt)("p",null,"To know the usage of any of the core commands use the following syntax:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian <command> <subcommand> --help\n")),(0,l.kt)("h2",{id:"managing-policies"},"Managing Policies"),(0,l.kt)("p",null,"Policies are used to define governance rules of the data access.\nPolicies command allows us to list, create or update policies."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"What is inside?")),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian policy\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Available Commands:\n  apply       Apply a policy config\n  create      Create a new policy\n  edit        Edit a policy\n  init        Creates a policy template\n  list        List and filter access policies\n  plan        Show changes from the new policy\n  view        View a policy\n")),(0,l.kt)("h3",{id:"policy-init"},"Policy Init"),(0,l.kt)("p",null,"This command is used to create a policy template with a given file name. Check ",(0,l.kt)("a",{parentName:"p",href:"/guardian/docs/reference/policy"},"policy reference")," for more details on the policy configuration."),(0,l.kt)("p",null,"Syntax for making the policy initialization file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian policy init --file=<output-name>\n")),(0,l.kt)("p",null,"flags required"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   File name for the policy config\n")),(0,l.kt)("h4",{id:"example-configurations"},"Example Configurations"),(0,l.kt)("p",null,"We can configure a policy file ",(0,l.kt)("inlineCode",{parentName:"p"},"policy.yaml")," as shown below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"# policy.yaml\nid: my_policy\nsteps:\n  - name: manager_approval\n    description: Manager approval for sensitive data\n    when: $appeal.resource.details.is_sensitive == true\n    strategy: manual\n    approvers:\n      - $appeal.creator.manager_email\n  - name: resource_owner_approval\n    description: Approval from resource admin/owner\n    strategy: manual\n    approvers:\n      - $appeal.resource.details.owner\n")),(0,l.kt)("p",null,"Now, we can create a policy using the ",(0,l.kt)("inlineCode",{parentName:"p"},"create")," command as given below."),(0,l.kt)("h3",{id:"create-policy"},"Create Policy"),(0,l.kt)("p",null,"The create command is used to register a new policy. For this we have to define our policy file, which would be passed as a flag to the ",(0,l.kt)("inlineCode",{parentName:"p"},"create")," command."),(0,l.kt)("p",null,"Policy has ",(0,l.kt)("inlineCode",{parentName:"p"},"version")," to ensure each appeal has a reference to an applied policy when it's created. A policy is created with an initial ",(0,l.kt)("inlineCode",{parentName:"p"},"version")," equal to ",(0,l.kt)("inlineCode",{parentName:"p"},"1"),"."),(0,l.kt)("p",null,"Usage ",(0,l.kt)("inlineCode",{parentName:"p"},"guardian policy create [flags]")),(0,l.kt)("p",null,"Flags required:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   Path to the policy config\n\n$ guardian policy create --file=<file-path>\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"policy created with id: my_policy\n")),(0,l.kt)("h3",{id:"list-policies"},"List Policies"),(0,l.kt)("p",null,"To get a list and filter of all the avaliable access policies present in the Guardian database, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"list")," command as explained here."),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian policy list\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"  ID             VERSION  DESCRIPTION                             STEPS\n  my_policy       1        two step policy for tableau workbooks   manager_approval,resource_owner_approval\n")),(0,l.kt)("h3",{id:"edit-policy"},"Edit Policy"),(0,l.kt)("p",null,"To update an existing policy present in the Guardian' database using a file, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"edit")," command as explained here. Updating a policy actually means creating a new policy with the same id but the version gets incremented by 1. Both the new and previous policies still can be used by providers."),(0,l.kt)("p",null,"Usage :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian policy edit --file=<file-path>\n")),(0,l.kt)("p",null,"An example update of the ",(0,l.kt)("inlineCode",{parentName:"p"},"policy.yaml")," file is given below:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"id: my_policy\nsteps:\n  - name: supervisor_approval\n    strategy: manual\n    approvers:\n    - $appeal.resource.details.supervisor\n  - name: head_approval\n    strategy: manual\n    approvers:\n    - $appeal.resource.details.owner\n")),(0,l.kt)("p",null,"Now to update the policy defined here."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian policies edit --file policy.yaml\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"policy updated\n")),(0,l.kt)("p",null,"Note that on update of a policy it's version is also updated. We can verify this by listing all the policies."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"  ID             VERSION  DESCRIPTION                                       STEPS\n  my_policy     2        two step policy for tableau workbooks             supervisor_approval,resource_owner_approval\n")),(0,l.kt)("h3",{id:"view-policy"},"View Policy"),(0,l.kt)("p",null,"View a policy. Display the ID, name, and other information about a policy."),(0,l.kt)("p",null,"Usgae:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian policy view <policy-id> --version=<policy-version>\n")),(0,l.kt)("p",null,"Flags"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'-o, --output string    Print output with the selected format (default "yaml")\n-v, --version string   Version of the policy\n')),(0,l.kt)("h3",{id:"apply-policy"},"Apply Policy"),(0,l.kt)("p",null,"Apply a policy config.Create or edit a policy from a file."),(0,l.kt)("p",null,"Usage:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian policy apply --file=<file-path>\n")),(0,l.kt)("p",null,"Flags\n-f, --file string Path to the policy config"),(0,l.kt)("h3",{id:"plan-policy"},"Plan Policy"),(0,l.kt)("p",null,"Show changes from the new policy. This will not actually apply the policy config."),(0,l.kt)("p",null,"Usage:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian policy plan --file=<file-path>\n")),(0,l.kt)("p",null,"flags"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   Path to the policy config\n")),(0,l.kt)("h2",{id:"managing-providers"},"Managing Providers"),(0,l.kt)("p",null,"Providers command allows us to list, create or update providers."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"What is inside?"))),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian providers\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Available Commands:\n  apply       Apply a provider\n  create      Register a new provider\n  edit        Edit a provider\n  init        Creates a provider template\n  list        List and filter providers\n  plan        Show changes from the new provider\n  view        View a provider details\n")),(0,l.kt)("h3",{id:"provider-init"},"Provider Init"),(0,l.kt)("p",null,"This command is used to creates a provider template. Following this define the provider's config file, which would be passed as a flag to the ",(0,l.kt)("inlineCode",{parentName:"p"},"create")," command. Check ",(0,l.kt)("a",{parentName:"p",href:"/guardian/docs/reference/provider#providerconfig"},"provider reference")," for more details on the configuration."),(0,l.kt)("p",null,"Syntax for making the initialization file."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"guardian provider init [flags]\n")),(0,l.kt)("p",null,"Flags required :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   File name for the policy config\n")),(0,l.kt)("h4",{id:"example-configurations-1"},"Example Configurations"),(0,l.kt)("p",null,"We can configure a ",(0,l.kt)("inlineCode",{parentName:"p"},"provider.yaml")," file for tableau provider as shown below."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"type: tableau\nurn: 691acb66-27ef-4b4f-9222-f07052e6ffg0\nlabels:\n  entity: gojek\n  landscape: id\ncredentials:\n  host: https://prod-apnortheast-a.online.tableau.com\n  username: user@test.com\n  password: password@123\n  content_url: guardiantestsite\nappeal:\n  allow_active_access_extension_in: 7d\nresources:\n  - type: metric\n    policy:\n      id: policy_20\n      version: 1\n    roles:\n      - id: read\n        name: Read\n        permissions:\n          - name: Read:Allow\n      - id: write\n        name: Write\n        permissions:\n          - name: Write:Allow\n")),(0,l.kt)("p",null,"To register a new provider use the ",(0,l.kt)("inlineCode",{parentName:"p"},"create")," command as shown below."),(0,l.kt)("h3",{id:"create-provider"},"Create Provider"),(0,l.kt)("p",null,"The create command is used to register a new provider on the Guardian database."),(0,l.kt)("p",null,"Usage ",(0,l.kt)("inlineCode",{parentName:"p"}," guardian provider create [flags]")),(0,l.kt)("p",null,"Flags required and usage:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"-f, --file string   Path to the provider config\n\n$ guardian providers create --file provider.yaml\n")),(0,l.kt)("p",null,"Output is of the following form:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"provider created with id: 26\n")),(0,l.kt)("h3",{id:"list-providers"},"List Providers"),(0,l.kt)("p",null,"To get a list of all the providers present in the Guardian' database, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"list")," command as explained here."),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian providers list\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"  ID  TYPE     URN\n  21  tableau  691acb66-27ef-4b4f-9222-f07052e6ffc2\n  22  tableau  691acb66-27ef-4b4f-9222-f07052e6ffc8\n  26  tableau  691acb66-27ef-4b4f-9222-f07052e6ffg0\n  24  tableau  691acb66-27ef-4b4f-9222-f07052e6ffd0\n")),(0,l.kt)("h3",{id:"edit-provider"},"Edit Provider"),(0,l.kt)("p",null,"To update an existing provider present in the Guardian' database, use the ",(0,l.kt)("inlineCode",{parentName:"p"},"edit")," command as explained here. Update the ",(0,l.kt)("inlineCode",{parentName:"p"},"provider.yaml")," file with required changes."),(0,l.kt)("p",null,"Usage : ",(0,l.kt)("inlineCode",{parentName:"p"},"$ guardian provider edit <provider-id> --file <file-path>")),(0,l.kt)("p",null,"Flags required :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   Path to the provider config\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"provider updated\n")),(0,l.kt)("h3",{id:"plan-provider"},"Plan Provider"),(0,l.kt)("p",null,"This command is to show the changes from the new provider. This command will not actually apply the provider config."),(0,l.kt)("p",null,"Usage : ",(0,l.kt)("inlineCode",{parentName:"p"},"$ guardian provider plan [flags]")),(0,l.kt)("p",null,"Flags required :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   Path to the provider config\n")),(0,l.kt)("h3",{id:"view-provider"},"View Provider"),(0,l.kt)("p",null,"This command is used to view a provider details. Displays the ID, name, and other information about a provider."),(0,l.kt)("p",null,"Usage : ",(0,l.kt)("inlineCode",{parentName:"p"},"$ guardian provider view <provider-id> [flags]")),(0,l.kt)("p",null,"Flags required :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'-o, --output string   Print output with the selected format (default "yaml")\n')),(0,l.kt)("h3",{id:"apply-provider"},"Apply Provider"),(0,l.kt)("p",null,"Apply a provider. It is used to create or edit a provider from a file."),(0,l.kt)("p",null,"Usage : ",(0,l.kt)("inlineCode",{parentName:"p"},"$ guardian provider apply [flags]")),(0,l.kt)("p",null,"Flags required :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   Path to the provider config\n\n$ guardian provider apply --file <file-path>\n")),(0,l.kt)("h2",{id:"managing-resources"},"Managing Resources"),(0,l.kt)("p",null,"Resources command allows us to list and set metadata of resources."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"What is inside?"))),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian resources\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Available Commands:\n  list        List resources\n  set         Store new metadata for a resource\n  view        View a resource details\n")),(0,l.kt)("h3",{id:"list-resources"},"List Resources"),(0,l.kt)("p",null,"It fetches the list of all the resources in the Guardian's database."),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian resource list\n$ guardian resource list --provider-type=bigquery --type=dataset\n$ guardian resource list --details=key1.key2:value --details=key1.key3:value\n")),(0,l.kt)("p",null,"List resources flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-D, --deleted                Show deleted resources\n-d, --details stringArray    Filter by details object values. Example: --details=key1.key2:value\n-n, --name string            Filter by name\n-T, --provider-type string   Filter by provider type\n-U, --provider-urn string    Filter by provider urn\n-t, --type string            Filter by type\n-u, --urn string             Filter by urn\n")),(0,l.kt)("p",null,"The output is the following form:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"ID    PROVIDER                              TYPE        URN                                   NAME\n3552  tableau                               view        8a48df6d-bb5c-438f-a038-35149011e1b5  Flight Delays\n      691acb66-27ef-4b4f-9222-f07052e6ffc2\n4704  tableau                               metric      a408051f-c394-4a73-8f33-7bf7ba001d99  my-test-metric-ishan\n      691acb66-27ef-4b4f-9222-f07052e6ffc2\n3792  tableau                               workbook    7c940f8b-34c7-44af-9998-b95deef54edd  Regional\n      691acb66-27ef-4b4f-9222-f07052e6ffc8\n3802  tableau                               view        3bd3acd1-0681-458b-9566-0519ba844519  Overview\n      691acb66-27ef-4b4f-9222-f07052e6ffc8\n3807  tableau                               view        703c58f2-5b7f-46ba-bf96-9f4b473e4da8  Commission Model\n      691acb66-27ef-4b4f-9222-f07052e6ffc8\n5614  tableau                               view        7342fec1-4092-4bd4-abf4-8e531fe0f8ad  Stocks\n      691acb66-27ef-4b4f-9222-f07052e6ffd0\n")),(0,l.kt)("h3",{id:"set-resource"},"Set Resource"),(0,l.kt)("p",null,"Store new metadata for a resource. Guardian allows users to add metadata to the resources. This can be useful when configuring the approval steps in the policy that needs information from metadata e.g. \u201cowners\u201d as the approvers."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian resource set <resource-id> --filePath=<file-path>\n")),(0,l.kt)("p",null,"This command supports the following flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-f, --file string   updated resource file path\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Here is an example below:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"$ guardian resource set --id={{resource_id}} --values=<key1>=<value1> --values=<key2>=<value2>\n")),(0,l.kt)("h3",{id:"view-resource"},"View Resource"),(0,l.kt)("p",null,"View a resource details"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian resource view <resource-id> --output=json --metadata=true\n")),(0,l.kt)("p",null,"This command supports the following flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-m, --metadata   Set if you want to see metadata, default: false\n")),(0,l.kt)("h2",{id:"managing-appeals"},"Managing Appeals"),(0,l.kt)("p",null,"Appeals command allows us to list, create, list and reject appeal."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"What is inside?")),(0,l.kt)("p",null,"Enter the following code into the terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian appeals\n")),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"Available Commands:\n  approve     Approve an approval step\n  cancel      Cancel an appeal\n  create      Create a new appeal\n  list        List and filter appeals\n  reject      Reject an approval step\n  revoke      Revoke an active access/appeal\n  status      Approval status of an appeal\n")),(0,l.kt)("h3",{id:"create-appeal"},"Create Appeal"),(0,l.kt)("p",null,"It helps us to create a new appeal."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Here are some examples given below: ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'$ guardian appeal create\n$ guardian appeal create --account=<account-id> --type=<account-type> --resource=<resource-id> --role=<role> --description="<description>"\n')),(0,l.kt)("p",null,"This command supports the following flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-a, --account string       Email of the account to appeal\n    --description string   The description of the appeal\n-d, --duration string      Duration of the access\n-R, --resource string      ID of the resource\n-r, --role string          Role to be assigned\n-t, --type string          Type of the account\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},'$ guardian appeals create --resource-id 5624 --role write --user test-user@email.com --options.duration "24h"\n')),(0,l.kt)("p",null,"The output is the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"appeal created with id: 13\n")),(0,l.kt)("h3",{id:"list-appeals"},"List Appeals"),(0,l.kt)("p",null,"This command helps us to list appeals in the Guardian's database, we can also filter the appeals with some additional queries flags."),(0,l.kt)("p",null,"To filter the list of appeals by Role, Status or Account use the following flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-a, --account string       Filter by account\n-r, --role string          Filter by role\n-s, --status stringArray   Filter by status(es)\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"}," Here are some examples below: ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"$ guardian appeal list\n$ guardian appeal list --status=pending\n$ guardian appeal list --role=viewer\n")),(0,l.kt)("p",null,"The output is of the form :"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-text"},"  ID  USER                  RESOURCE ID  ROLE   STATUS\n  13  test-user@email.com   5624         write  pending\n")),(0,l.kt)("h3",{id:"approve-appeals"},"Approve Appeals"),(0,l.kt)("p",null,"It's used to approve an appeal.\nApprove an approval step"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian appeal approve <appeal-id> --step=<step-name>\n")),(0,l.kt)("p",null,"This command supports the following flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"\n-s, --step string   Name of approval step\n")),(0,l.kt)("h3",{id:"reject-appeals"},"Reject Appeals"),(0,l.kt)("p",null,"It's used to reject an appeal."),(0,l.kt)("p",null,"Reject an approval step"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian appeal reject <appeal-id> --step=<step-name>\n")),(0,l.kt)("h3",{id:"revoke-appeal"},"Revoke Appeal"),(0,l.kt)("p",null,"Revoke an active access/appeal"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian appeal revoke <appeal-id>\n$ guardian appeal revoke <appeal-id> --reason=<reason>\n")),(0,l.kt)("p",null,"This command supports the following flags:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"-r, --reason string   Reason of the revocation\n")),(0,l.kt)("h3",{id:"check-appeal-status"},"Check Appeal Status"),(0,l.kt)("p",null,"Status value of an appeal can either be one of these ",(0,l.kt)("inlineCode",{parentName:"p"},"pending"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"canceled"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"active"),",",(0,l.kt)("inlineCode",{parentName:"p"},"rejected"),",",(0,l.kt)("inlineCode",{parentName:"p"},"terminated"),". To check the current Approval status of the appeal use the following command:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian appeal status <appeal-id>\n")),(0,l.kt)("h3",{id:"cancel-appeal"},"Cancel Appeal"),(0,l.kt)("p",null,"Cancel an appeal. ",(0,l.kt)("strong",{parentName:"p"},"Appeal creator can cancel their appeal while it's status is still on ",(0,l.kt)("inlineCode",{parentName:"strong"},"pending"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$ guardian appeal cancel <appeal-id>\n")),(0,l.kt)("h3",{id:"add-approver"},"Add Approver"),(0,l.kt)("p",null,"Add a new approver into an existing approval"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"$ guardian appeal add-approver --appeal-id=<appeal-id> --approval-id=<approval-id> --email=<new-approver-email>\n")),(0,l.kt)("h3",{id:"delete-approver"},"Delete Approver"),(0,l.kt)("p",null,"Delete existing approver from an approval step"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"$ guardian appeal delete-approver --appeal-id=<appeal-id> --approval-id=<approval-id> --email=<new-approver-email>\n")))}d.isMDXComponent=!0}}]);