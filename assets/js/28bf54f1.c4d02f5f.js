"use strict";(self.webpackChunkguardian=self.webpackChunkguardian||[]).push([[978],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return u}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(a),u=r,b=m["".concat(l,".").concat(u)]||m[u]||c[u]||i;return a?n.createElement(b,o(o({ref:t},d),{},{components:a})):n.createElement(b,o({ref:t},d))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2048:function(e,t,a){a.r(t),a.d(t,{assets:function(){return l},contentTitle:function(){return o},default:function(){return c},frontMatter:function(){return i},metadata:function(){return s},toc:function(){return p}});var n=a(3117),r=(a(7294),a(3905));const i={},o="Metabase",s={unversionedId:"providers/metabase",id:"providers/metabase",title:"Metabase",description:"Metabase is a data visualization tool that lets you connect to external databases and create charts and dashboards based on the data from the databases. Guardian supports access management to the following resources in Metabase:",source:"@site/docs/providers/metabase.md",sourceDirName:"providers",slug:"/providers/metabase",permalink:"/guardian/docs/providers/metabase",draft:!1,editUrl:"https://github.com/goto/guardian/edit/master/docs/docs/providers/metabase.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Grafana",permalink:"/guardian/docs/providers/grafana"},next:{title:"No Op",permalink:"/guardian/docs/providers/noop"}},l={},p=[{value:"Authentication",id:"authentication",level:2},{value:"Metabase Access Creation",id:"metabase-access-creation",level:2},{value:"1. Config",id:"1-config",level:2},{value:"Example",id:"example",level:4},{value:"<code>MetabaseCredentials</code>",id:"metabasecredentials",level:3},{value:"<code>MetabaseResourceType</code>",id:"metabaseresourcetype",level:3},{value:"<code>MetabaseResourcePermission</code>",id:"metabaseresourcepermission",level:3}],d={toc:p};function c(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"metabase"},"Metabase"),(0,r.kt)("p",null,"Metabase is a data visualization tool that lets you connect to external databases and create charts and dashboards based on the data from the databases. Guardian supports access management to the following resources in Metabase:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Database"),(0,r.kt)("li",{parentName:"ol"},"Collection")),(0,r.kt)("p",null,"Metabase itself manages its user access on group-based permissions, while Guardian lets each individual user have access directly to the resources."),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"Guardian requires ",(0,r.kt)("strong",{parentName:"p"},"email")," and ",(0,r.kt)("strong",{parentName:"p"},"password")," of an administrator user in Metabase."),(0,r.kt)("p",null,"Example provider config for metabase:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"---\ncredentials:\n  host: http://localhost:12345\n  user: administrator@email.com\n  password: password123\n")),(0,r.kt)("h2",{id:"metabase-access-creation"},"Metabase Access Creation"),(0,r.kt)("p",null,"Guardian creates a group that has only one permission type to one resource in Metabase Example: If a user wants to have ",(0,r.kt)("strong",{parentName:"p"},"view")," access to ",(0,r.kt)("strong",{parentName:"p"},"database X")," ","(","id=1",")",", Guardian will create a group called ",(0,r.kt)("strong",{parentName:"p"},"database_1_view"),", grant it with ",(0,r.kt)("strong",{parentName:"p"},"view")," permission only to ",(0,r.kt)("strong",{parentName:"p"},"database X"),", and then add the user to that group."),(0,r.kt)("p",null,"The group naming convention is:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"<resource_type>_<resource_id>_<permission_type/role>\n")),(0,r.kt)("h2",{id:"1-config"},"1. Config"),(0,r.kt)("h4",{id:"example"},"Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'type: metabase\nurn: my-metabase\ncredentials:\n  host: http://localhost:12345\n  user: administrator@email.com\n  password: password123\nappeal:\n  allow_active_access_extension_in: "7d"\nresources:\n  - type: database\n    policy:\n      id: policy_id\n      version: 1\n    roles:\n      - id: read\n        name: Read\n        permissions:\n          - schemas:all\n      - id: query\n        name: SQL Query\n        permissions:\n          - schemas:all\n          - native:write\n  - type: collection\n    policy:\n      id: policy_id\n      version: 1\n    roles:\n      - id: viewer\n        name: Viewer\n        permissions:\n          - read\n      - id: editor\n        name: Editor\n        permissions:\n          - write\n  - type: table\n    policy:\n      id: policy_id\n      version: 1\n    roles:\n      - id: viewer\n        name: Viewer\n        permissions:\n          - all\n  - type: group\n    policy:\n      id: policy_id\n      version: 1\n    roles:\n      - id: member\n        name: Member\n        permissions:\n          - member\n')),(0,r.kt)("h3",{id:"metabasecredentials"},(0,r.kt)("inlineCode",{parentName:"h3"},"MetabaseCredentials")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Fields"),(0,r.kt)("th",{parentName:"tr",align:"left"}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"host")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"string")," Required. Metabase instance host Example: ",(0,r.kt)("inlineCode",{parentName:"td"},"http://localhost:12345"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"username")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"email")," Required. Email address of an account that has Administration permission")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"password")),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("inlineCode",{parentName:"td"},"string")," Required. Account's password")))),(0,r.kt)("h3",{id:"metabaseresourcetype"},(0,r.kt)("inlineCode",{parentName:"h3"},"MetabaseResourceType")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"database")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"table")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"collection")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"group"))),(0,r.kt)("h3",{id:"metabaseresourcepermission"},(0,r.kt)("inlineCode",{parentName:"h3"},"MetabaseResourcePermission")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Type"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Details"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"Required. ",(0,r.kt)("inlineCode",{parentName:"td"},"string")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Metabase permission mapping ",(0,r.kt)("strong",{parentName:"td"},"Possible values:")," - ",(0,r.kt)("inlineCode",{parentName:"td"},"database"),": ",(0,r.kt)("inlineCode",{parentName:"td"},"schemas:all")," ","(","read table",")",", ",(0,r.kt)("inlineCode",{parentName:"td"},"native:write")," ","(","run SQL query",")","  ",(0,r.kt)("strong",{parentName:"td"},"Note"),": Metabase requires ",(0,r.kt)("inlineCode",{parentName:"td"},"schemas:all")," permission for ",(0,r.kt)("inlineCode",{parentName:"td"},"native:write")," to be able to work - ",(0,r.kt)("inlineCode",{parentName:"td"},"collection"),": ",(0,r.kt)("inlineCode",{parentName:"td"},"read"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"write"),"  ",(0,r.kt)("strong",{parentName:"td"},"Note"),": Metabase table requires ",(0,r.kt)("inlineCode",{parentName:"td"},"all")," permission to read table, no write permission on table level ",(0,r.kt)("strong",{parentName:"td"},"Note"),": Metabase group requires no specific permission to be a member of group")))))}c.isMDXComponent=!0}}]);